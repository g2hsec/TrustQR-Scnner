# TrustQR-Scnner
큐싱 인식 향상을 위한 실시간 악성 QR 탐지 및 사용자 보호 솔루션 개발​ : 씨큐알(SecQR)

# 프로젝트 개요
최근 106명을 대상으로 한 설문조사에 따르면, QR 코드 스캔 시 악성 행위가 이루어질까 걱정된다는 응답이 64.8%, QR 코드에서 사이버 범죄를 연상한다는 비율도 63.5%에 달했습니다. <br>
특히 응답자의 65.1%는 ‘큐싱(QR+피싱)’이라는 용어를 들어본 적이 있으며, 약 60%는 관련 위협에 대해 경각심을 갖고 있다고 응답했습니다.<br>
큐싱은 단순한 링크 접근을 넘어, 악성 앱 설치, 자격 증명 탈취, 금융 정보 유출 등으로 이어질 수 있는 현대적 사회공학 기반 공격입니다.<br>
그럼에도 다수의 사용자는 URL 내용을 확인하지 않고 QR 코드를 무심코 스캔하고 있어 보안 사각지대가 존재합니다.<br>
응답자의 78.3%는 사이버 범죄를 차단하는 전용 애플리케이션이 있다면 사용해보겠다고 답했으며, 가장 기대하는 기능은 ‘악성 링크 탐지(84%)’로 나타났습니다.<br>
본 프로젝트는 이러한 사회적 인식과 실질적 위협에 대응하기 위해, QR 코드 내 URL 실시간 분석, 악성 도메인 탐지, 도메인 신뢰도 시각화 기능을 갖춘 QR 보안 스캐너를 개발하는 것을 목표로 합니다.<br>

# 1. 시큐알(SecQR)의 목적
 모바일 환경에서 실시간으로 QR 코드를 스캔하면, 해당 QR 코드 내 포함된 URL에 대해 다양한 보안 위협 요소를 통합 분석함으로써 기존 QR 코드 스캐너의 보안 취약점을 효과적으로 개선한 안전한 스캐너를 구현할 수 있다.<br> 본 시스템은 URL에 대한 정적/동적 분석을 위해 Python 기반의 FastAPI 서버를 중심으로 구성되어 있으며, 확장성과 유지보수성이 뛰어난 백엔드 구조를 제공한다.

# 주요 목표

- QR 코드로 인한 보안 위협 탐지
- 실시간 URL 위험도 평가
- 네트워크 성능 최적화 및 캐싱 관리
- 사용자에게 분석 결과를 시각적으로 제공

# 주요 기능

1. 실시간 QR 코드 스캔: QR 코드 스캔 후 URL을 실시간으로 분석하여 즉각적인 피드백 제공.
2. URL 리디렉션 추적: 리디렉션이 발생할 경우 최종 목적지 URL까지 추적하여 위험성을 평가.
3. 위협 등급 평가: Safe Browsing API와 VirusTotal API를 사용하여 URL의 위험도를 분석.
4. 위협 인텔리전스 수집: WHOIS, DNS 정보 조회를 통해 URL의 소유자 및 도메인 정보를 탐지.
5. Tor 및 프록시 사용 탐지: URL 접속 경로에서 Tor 네트워크나 프록시를 이용한 우회 여부 확인.
6. DGA 생성 도메인 탐지 : 딥러닝을 사용하여 DGA로 생성된 C2 서버 의심 도메인 탐지.
7. HTTPS 확인 : SSL 여부 확인.
8. 캐싱 데이터 관리: Raspberry Pi를 이용하여 이미 분석된 URL은 캐시 데이터로 활용하여 성능 향상.
9. 위협 레벨 시각화: 분석 결과를 시각화하여 사용자가 직관적으로 이해할 수 있도록 제공.

# 프로젝트 구조

- 데이터 수집 모듈: QR 코드로 수집한 URL을 실시간으로 전송.
- 분석 엔진: 수집된 URL을 다양한 API 및 검증 로직을 통해 분석하고 위협 등급을 계산.
- 캐싱 서버: Raspberry Pi를 통해 데이터베이스 관리 및 중복 분석 방지.
- 시각화 모듈: 분석 결과를 직관적인 형태로 출력.
- 로그 저장 모듈: 모든 분석 이력을 로그 파일로 저장하여 추후 검토 가능.

![image](https://github.com/user-attachments/assets/433233a5-50c5-4f71-aa78-a15b492e3958)
<br>
1. QR 스캐너 앱
   - QR코드에서 URL 추출 후 서버로 전송
2. FastAPI 서버
   - 수집된 URL을 사양한 보안 분석 모듈로 전달.
3. URL 분석 기능
   - 리다이렉션 추적
   - Tor/프록시 탐지
   - Safe Browsing API 및 Viurs Total API
   - URL 캐시
4. 결과 및 경고 생성
   - 분석된 위험도 기반 결과 생성
5. 시각화
   - 위험도 등급 표시
   - 도메인 신뢰도 점수 제공

<br>
# 기능 테스트

![image](https://github.com/user-attachments/assets/dff2bc7f-a055-4ecd-ad7b-dbe38edbe774)
<br>
> 사용자가 앱에 최초 접근하면, 애플리케이션은 초기 온보딩 화면을 통해 사용법 및 주의사항을 안내한다. 이후, mobile_scanner 패키지를 통해 디바이스 카메라 접근 권한을 요청하고, 실시간 프리뷰 스트림 기반의 QR 코드 인식이 시작된다. QR 코드가 감지되면, 내장 디코더를 통해 인코딩된 정보를 디코딩하여 문자열 형태로 파싱하며, 해당 데이터를 UI에 동적으로 출력하도록 구성하였다.

## 안전한 QR
![image](https://github.com/user-attachments/assets/602494ae-d638-42f5-8ed2-805ec7f77acd)

## 안전하지 않은 QR
![image](https://github.com/user-attachments/assets/8e929019-dd5f-483d-8a48-066bac1629a7)
<br>

 (1) 위험 탐지 조건 판단<br>
   - Flutter 클라이언트는 백엔드(FastAPI 등)로부터 수신한 JSON 응답 내 "safe": false 여부를 판단하여, UI 흐름을 변경한다. 이는 상태 기반 조건 분기로 구현되며, if 문을 통해 트리거된다.<br>
<br>
 (2) 경고 다이얼로그 출력<br>
   - 위험으로 판단된 경우 사용자에게 다음과 같은 선택지를 포함하는 다이얼로그를 띄운다:<br>
     → "안전하지 않은 QR입니다. 그래도 신뢰하시겠습니까?"<br>
<br>
 (3) 선택지에 따른 분기 처리
   - 예: 사용자가 신뢰를 선택할 경우, url_launcher 패키지를 통해 해당 URL 또는 콘텐츠로 강제 이동 (예: 웹뷰 오픈 or 브라우저 열기)<br>
   - 아니오: 사용자가 거부 시, Navigator.popUntil(...) 또는 Navigator.pushReplacement(...)로 초기 QR 스캔 화면으로 복귀<br>
   - 검사 결과 보기: 분석된 결과 중 탐지된 악성 항목만 요약 출력 (예: "phishing": true, "suspicious_word": ["login", "free-gift"] 등)<br>
 <br>
(4) 상세 결과 보기 기능 구현<br>
   - "검사 결과 보기" 화면에 추가적으로 "상세 결과 보기" 버튼을 배치하고, 클릭 시 전체 보안 분석 결과를 포함한 세부 정보 페이지로 이동한다. 이는 보통 showModalBottomSheet, Navigator.push 등으로 구현되며, JSON 전체를 시각적으로 렌더링하는 UI를 제공한다.<br>
<br>

# 시큐알(SecQR)앱과 다른 QR 보안앱의 차이점

 1) 싹다잡아  - 기능: 국내 보안 앱으로, QR 코드를 스캔한 뒤 해당 URL을 자체 DB 혹은 보안 연동 서버를 통해 탐지하는 방식<br>
  - 특징: 단순 URL 탐지 (악성 URL 여부 확인 위주), 통신 보안 여부(HTTPS) 확인, 앱 내부 브라우저에서 미리보기 제공<br>
<br>
 2) C-Port QR Code Scanner<br>
  - 기능: 국방/보안용으로 설계된 QR 코드 스캐너. 인트라넷/국방망에서 많이 활용됨.<br>
  - 특징: 오프라인 기반 URL 정적 분석, 화이트리스트 기반 접근 제어, 로깅 및 로그 서버 연동<br>
<br>
 3) Trend Micro QR Scanner<br>
  - 기능: 트렌드 마이크로 제공의 글로벌 보안 앱. QR 스캔 후 악성 여부를 클라우드 DB 기반으로 확인<br>
  - 특징: 클라우드 기반 악성 URL 탐지, Phishing/Scam 탐지, 일부 국가 차단 URL 확인<br>

| 항목                  | 싹다잡아 | C-Port | Trend Micro | 시큐알(SecQR) |
|----------------------|---------|-------|-------------|--------------|
| 실시간 검사           | ✗       | ✗     | ⭕          | ⭕           |
| 멀티 엔진 분석        | ✗       | ✗     | ⭕          | ⭕           |
| Virustotal, Google Safe Browsing | ✗ | ✗ | ⭕        | ⭕           |
| DGA 탐지              | ✗       | ✗     | ⭕          | ⭕           |
| Tor 사용 탐지         | ✗       | ✗     | ⭕          | ⭕           |
| HTTPS 여부 검사       | ⭕       | ⭕     | ⭕          | ⭕           |
| 리다이렉션 탐지       | ✗       | ✗     | ⭕          | ⭕           |
<br>
> 3가지의 QR 보안 앱은 리다이렉션된 URL의 최종 목적지를 탐지하지 못해 악성 사이트를 놓칠 수 있지만, 시큐알(SecQR)앱은 실시간 서버 분석으로 이를 정확히 추적해 보안 강화함

1) 싹다잡아<br>

싹다잡아는 리다이렉션이 포함된 QR 코드 URL을 처리할 때, 중간 경유지(URL redirect chain)를 추적하거나 최종 목적지를 분석하는 절차 없이 최초 URL만을 기반으로 판단합니다.<br> 이로 인해 단축 URL 또는 다단계 리다이렉션을 활용해 실제 악성 도메인을 숨길 경우, 최종적으로 연결되는 악성 서버나 피싱 사이트에 대해 탐지 및 차단이 불가능하다는 보안적 한계가 있습니다.<br>

2) C-Port QR Code Scanner<br>

C-Port QR Code Scanner는 리다이렉션이 포함된 QR 코드에 대해 정적 URL 문자열 기반의 단순 필터링 방식만을 적용합니다.<br> 실제 리다이렉션 체인을 따라가지 않아 정상 리다이렉션도 무차별적으로 경고 메시지를 출력하는 문제가 있습니다.

3) Trend Micro QR Scanner<br>

Trend Micro QR Scanner는 실시간 URL 검사 구조를 갖추고 있지만, 검증 로직이 지나치게 완화되어 대부분의 URL에 대해 '안전함' 메시지를 출력합니다.<br> 리다이렉션 구조나 비정상 도메인 구조에 대한 동적 추적 없이 단일 API 호출로 검사 결과를 결정하여 False Negative가 발생할 수 있습니다.

4) 시큐알(SecQR)<br>

시큐알 앱은 리다이렉션 기반의 위협까지 고려한 실시간 다중 보안 진단 기능을 제공합니다.<br> 최종 목적지까지 추적 후 멀티 엔진 분석(VirusTotal, Google Safe Browsing), HTTPS 여부 확인, DGA 탐지, Tor 사용 여부 검사를 통해 높은 신뢰성을 확보합니다.

# 역할









